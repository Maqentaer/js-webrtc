<!DOCTYPE html>
<html>
	<head>
      <style>
         #video {
            position: absolute;
            left: 0;
            top: 0;
            width: 20%;
            height: auto;
         }
         #incomeVideo {
            position: absolute;
            width: 100%;
            height: 100%;
         }
      </style>
	</head>
	<body>
		<video id="video" autoplay></video>
      <video id="incomeVideo" autoplay></video>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/0.3.16/peer.min.js"></script>
		<script>
         var peer = new Peer('maqentaer-js-webrtc-caller', {host:'rapidserver.herokuapp.com', secure:true, port:443, key: 'peerjs', debug: 3}); 
         navigator.getUserMedia({
            audio: true,
            video: true
         }, function(stream) {
            var videoElement = document.getElementById('video');
            videoElement.src = URL.createObjectURL(stream);
            
            var call = peer.call('maqentaer-js-webrtc-receiver', stream);
            call.on('stream', function(remoteStream) {
               var videoElement = document.getElementById('incomeVideo');
               videoElement.src = URL.createObjectURL(remoteStream);
            });
         }, function(err) {
            console.log(err);
         });
		</script>
	</body>
</html>